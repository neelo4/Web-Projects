const PhoneLink: React.FC<{ isButton?: boolean }> = ({ isButton = false }) => {
  const { t } = useTranslation()
  const brand = ApiClient.getBrand()
  const [isVisible, setIsVisible] = useState(false)
  const [showLink, setShowLink] = useState(true)
  
  const trackingSuffix = isButton ? '-button' : ''
  const linkProps = {
    'data-tracking-name': `${brand.toLowerCase()}-telephone${trackingSuffix}`,
    href: `tel:${t('constants.phoneNumber')}`,
    ...(isButton && { button: 'primary' })
  }

  const handleShowNumber = (e: React.MouseEvent) => {
    e.preventDefault()
    setIsVisible(true)
    setShowLink(false)
  }

  return (
    <Link {...linkProps}>
      <span className="inline-flex items-center gap-1">
        {isVisible ? t('constants.phoneNumber') : t('constants.phoneNumberDisplay')}
        {showLink && (
          <Link
            onClick={handleShowNumber}
            className={`${isButton ? 'text-white' : 'text-blue-600'} hover:text-blue-800 text-sm focus:outline-none`}
          >
            {t('pages.callUs.showNumberText')}
          </Link>
        )}
      </span>
    </Link>
  )
}
