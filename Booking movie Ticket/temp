import React, { ReactNode, useContext, useState } from 'react';
import ReactMarkdown from 'react-markdown';
import { Button } from '@iag/chroma-react-ui.components';
import { Link } from '@iag/chroma-react-ui.components';
import { BrandDataProps, connectIagBrand } from '@iag-common/iag-brand-context';
import useBrowserDetect from '../../hooks/useBrowserDetect';
import {
  ActionName,
  ElementName,
  ElementType,
  Interaction,
  PageName,
} from '../../models/SiteTracking';
import { SiteTrackingContext } from '../../sitetracking/SiteTrackingProvider';

// ... (other interfaces remain the same)

function PhoneNumber({
  content,
  pagename,
  args,
  tt,
  t,
  tExists,
  variant = 'default',
}: PhoneNumberProps & BrandDataProps): JSX.Element {
  // ... (existing state and context declarations)

  const handleNumberClick = (e: React.MouseEvent) => {
    e.preventDefault();
    clickedNumberEvent();
    window.location.href = telLink; // Programmatically trigger tel link
  };

  if (variant === 'buttonPrimary') {
    return (
      <Button
        variant="primary"
        href={showNumber ? telLink : undefined}
        onClick={showNumber ? handleNumberClick : handleShowNumber}
        className="pv-m-0 gap-1"
        data-testid="phoneNumberButton"
      >
        {showNumber ? (
          unmaskedNumber
        ) : (
          <>
            {maskedNumber}
            <span className="ml-2" data-testid="showNumberText">
              {showNumberText}
            </span>
          </>
        )}
      </Button>
    );
  }

  // ... (rest of the component remains the same)
}

export default connectIagBrand()(PhoneNumber);
