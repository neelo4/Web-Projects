// ... all imports remain same, just add ShowPhoneNumber import
import ShowPhoneNumber from '../shared/ShowPhoneNumber';

const PreparePayment: React.FC<BrandDataProps & PreparePaymentProps> = ({
  t,
  tt,
  tExists,  // add tExists to props
  postCode,
  policyNumber,
  transactionNumber,
  versionNumber,
  isRenewal,
}) => {
  // ... all existing code remains exactly the same until the return statement

  return paymentError ? (
    <>
      <Link onClick={handleBackButtonClick}>
        <Icon className="i-angle-left pv-text-xl" />
        {tt('labels.back')}
      </Link>
      {paymentError.code ? (
        tExists('pages.callUs.showNumberText') ? (
          <TechnicalError
            id="PreparePaymentError"
            title={tt(`error.paymentMFEError.${paymentError.type}.${paymentError.code}.title`)}
            message={
              <ShowPhoneNumber
                maskedNumber={tt('pages.callUs.maskLinkLabel')}
                unmaskedNumber={tt('constants.phoneNumbers.generalEnquiries')}
                tt={tt}
                prefix={tt(`error.paymentMFEError.${paymentError.type}.${paymentError.code}.technicalMessagePrefix`)}
                suffix={tt(`error.paymentMFEError.${paymentError.type}.${paymentError.code}.technicalMessageSuffix`)}
              />
            }
          />
        ) : (
          <TechnicalError
            id="PreparePaymentError"
            title={tt(`error.paymentMFEError.${paymentError.type}.${paymentError.code}.title`)}
            message={t(`error.paymentMFEError.${paymentError.type}.${paymentError.code}.message`)}
          />
        )
      ) : (
        <TechnicalError id="PreparePaymentError" traceId={getTechErrorTraceId()} />
      )}
    </>
  ) : paymentData ? (
    useUnifiedPaymentMfe ? (
      <PaymentMfe {...(paymentData as OneOffPaymentProps)} />
    ) : (
      <OneOffPaymentMfe {...(paymentData as OneOffPaymentMfeProps)} />
    )
  ) : (
    <StandardLoader />
  );
};

export default connectIagBrand()(PreparePayment);
